{"code":"!function(e){var t={};function i(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var r in e)i.d(s,r,function(t){return e[t]}.bind(null,r));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,\"a\",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p=\"\",i(i.s=0)}([function(e,t,i){i(1);let s=new class{constructor(){this.game,this.canvas,this.globalTimer,this.resourcesDisplay}initialize(){this.game=new Clempire,this.game.load.then(function(){window.addEventListener(\"resize\",this.resizeHandler(),!0),this.drawGame(),this.displayResources(),this.startGame()}.bind(this))}resizeHandler(){let e={session:this,delta:100,timeout:!1};return function(){console.log(e),e.rtime=new Date,e.timeout||(e.timeout=!0,setTimeout(e.session.resizeEnd.bind(e),e.delta))}}resizeEnd(){console.log(this),new Date-this.rtime<this.delta?setTimeout(this.session.resizeEnd.bind(this),this.delta):(this.timeout=!1,this.session.drawGame.apply(this.session))}drawGame(){this.canvas=document.getElementById(\"mainCanvas\");let e=document.getElementById(\"left-side\");this.canvas.width=e.offsetWidth,this.canvas.height=e.offsetHeight,this.displaySources(),this.displayBuildings()}startGame(){this.globalTimer=setInterval(this.tick.bind(this),200)}tick(){this.updateResources()}displaySources(){let e=this.canvas.getContext(\"2d\");this.placeResourceAnchors();let t=document.getElementsByClassName(\"resource-field\"),i=0,s=this.canvas.height/(t.length+1);for(let r in this.game.sourcesData){if(i===t.length)throw new Error(\"Not enogh resource fields!\");let n=new Image;n.onload=function(){e.drawImage(n,0,0,n.width,n.height,.5*this.canvas.width-85,this.topGridSize*(this.counter+1)-85,170,170)}.bind({canvas:this.canvas,counter:i,topGridSize:s}),n.src=this.game.sourcesData[r].img,t[i].onclick=this.game.fieldClick.bind(this.game.sourcesData[r]),i++}}placeResourceAnchors(){let e=1,t=this.game.sourcesData.length,i=document.getElementById(\"anchors\");for(;i.firstChild;)i.removeChild(i.firstChild);for(let s in this.game.sourcesData){let r=document.createElement(\"div\");r.classList.add(\"resource-field-anchor\"),r.setAttribute(\"data-source-field\",e.toString()),r.style.top=`${100/(t+1)*e}%`,r.style.left=\"50%\";let n=document.createElement(\"div\");n.classList.add(\"resource-field\"),n.style.cursor=`url(${this.game.sourcesData[s].cursor}), pointer`,r.appendChild(n),i.appendChild(r),e++}}displayResources(){for(this.resourcesDisplay=document.querySelector(\"#resources ul\");this.resourcesDisplay.firstChild;)this.resourcesDisplay.removeChild(this.resourcesDisplay.firstChild);for(let e in this.game.resourcesData){let t=document.createElement(\"li\"),i=document.createElement(\"div\");i.style.background=`url(${this.game.resourcesData[e].icon})  no-repeat`,t.appendChild(i);let s=document.createElement(\"span\");s.classList.add(\"resource-count\"),t.appendChild(s),t.setAttribute(\"data-resource\",e),this.resourcesDisplay.appendChild(t)}}displayBuildings(){for(this.buildingsDisplay=document.getElementById(\"buildings\");this.buildingsDisplay.firstChild;)this.buildingsDisplay.removeChild(this.buildingsDisplay.firstChild);for(let e in this.game.buildingsData){let t=document.createElement(\"div\"),i=this.game.buildingsData[e];t.style.background=`url(${i.icon})  no-repeat`,t.setAttribute(\"title\",`${i.title}\\n\\n${i.description}`),this.buildingsDisplay.appendChild(t)}}updateResources(){for(let e=0;e<this.resourcesDisplay.children.length;e++){let t=this.resourcesDisplay.children[e];t.getElementsByTagName(\"span\")[0].innerText=this.game.resources.current[t.dataset.resource]}}};window.addEventListener(\"load\",s.initialize.bind(s),!0)},function(e,t,i){i(2)},function(e,t){}]);","extractedComments":[]}