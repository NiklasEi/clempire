{"map":"{\"version\":3,\"sources\":[\"webpack/bootstrap\",\"/home/nikl/Projects/ironhack/clempire/app/app.js\",\"/home/nikl/Projects/ironhack/clempire/app/game.js\"],\"names\":[\"installedModules\",\"__webpack_require__\",\"moduleId\",\"exports\",\"module\",\"i\",\"l\",\"modules\",\"call\",\"m\",\"c\",\"d\",\"name\",\"getter\",\"o\",\"Object\",\"defineProperty\",\"enumerable\",\"get\",\"r\",\"Symbol\",\"toStringTag\",\"value\",\"t\",\"mode\",\"__esModule\",\"ns\",\"create\",\"key\",\"bind\",\"n\",\"object\",\"property\",\"prototype\",\"hasOwnProperty\",\"p\",\"s\",\"require\",\"session\",\"Session\",\"_classCallCheck\",\"this\",\"game\",\"canvas\",\"globalTimer\",\"resourcesDisplay\",\"Clempire\",\"load\",\"then\",\"window\",\"addEventListener\",\"resizeHandler\",\"drawGame\",\"displayResources\",\"startGame\",\"context\",\"delta\",\"timeout\",\"console\",\"log\",\"rtime\",\"Date\",\"setTimeout\",\"resizeEnd\",\"apply\",\"document\",\"getElementById\",\"leftSide\",\"width\",\"offsetWidth\",\"height\",\"offsetHeight\",\"displaySources\",\"displayBuildings\",\"setInterval\",\"tick\",\"updateResources\",\"_this\",\"getContext\",\"placeResourceAnchors\",\"resourceFields\",\"getElementsByClassName\",\"counter\",\"topGridSize\",\"length\",\"_loop\",\"source\",\"Error\",\"image\",\"Image\",\"onload\",\"drawImage\",\"src\",\"sourcesData\",\"img\",\"onclick\",\"fieldClick\",\"count\",\"anchors\",\"firstChild\",\"removeChild\",\"anchor\",\"createElement\",\"classList\",\"add\",\"setAttribute\",\"toString\",\"style\",\"top\",\"concat\",\"left\",\"field\",\"cursor\",\"appendChild\",\"querySelector\",\"resource\",\"resourcesData\",\"display\",\"label\",\"background\",\"icon\",\"buildingsDisplay\",\"buildingIndex\",\"buildingsData\",\"building\",\"title\",\"description\",\"children\",\"resourceDisplay\",\"getElementsByTagName\",\"innerText\",\"resources\",\"current\",\"dataset\",\"initialize\"],\"mappings\":\"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\",\"sourcesContent\":[\" \\t// The module cache\\n \\tvar installedModules = {};\\n\\n \\t// The require function\\n \\tfunction __webpack_require__(moduleId) {\\n\\n \\t\\t// Check if module is in cache\\n \\t\\tif(installedModules[moduleId]) {\\n \\t\\t\\treturn installedModules[moduleId].exports;\\n \\t\\t}\\n \\t\\t// Create a new module (and put it into the cache)\\n \\t\\tvar module = installedModules[moduleId] = {\\n \\t\\t\\ti: moduleId,\\n \\t\\t\\tl: false,\\n \\t\\t\\texports: {}\\n \\t\\t};\\n\\n \\t\\t// Execute the module function\\n \\t\\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\\n\\n \\t\\t// Flag the module as loaded\\n \\t\\tmodule.l = true;\\n\\n \\t\\t// Return the exports of the module\\n \\t\\treturn module.exports;\\n \\t}\\n\\n\\n \\t// expose the modules object (__webpack_modules__)\\n \\t__webpack_require__.m = modules;\\n\\n \\t// expose the module cache\\n \\t__webpack_require__.c = installedModules;\\n\\n \\t// define getter function for harmony exports\\n \\t__webpack_require__.d = function(exports, name, getter) {\\n \\t\\tif(!__webpack_require__.o(exports, name)) {\\n \\t\\t\\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\\n \\t\\t}\\n \\t};\\n\\n \\t// define __esModule on exports\\n \\t__webpack_require__.r = function(exports) {\\n \\t\\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\\n \\t\\t\\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\\n \\t\\t}\\n \\t\\tObject.defineProperty(exports, '__esModule', { value: true });\\n \\t};\\n\\n \\t// create a fake namespace object\\n \\t// mode & 1: value is a module id, require it\\n \\t// mode & 2: merge all properties of value into the ns\\n \\t// mode & 4: return value when already ns object\\n \\t// mode & 8|1: behave like require\\n \\t__webpack_require__.t = function(value, mode) {\\n \\t\\tif(mode & 1) value = __webpack_require__(value);\\n \\t\\tif(mode & 8) return value;\\n \\t\\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\\n \\t\\tvar ns = Object.create(null);\\n \\t\\t__webpack_require__.r(ns);\\n \\t\\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\\n \\t\\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\\n \\t\\treturn ns;\\n \\t};\\n\\n \\t// getDefaultExport function for compatibility with non-harmony modules\\n \\t__webpack_require__.n = function(module) {\\n \\t\\tvar getter = module && module.__esModule ?\\n \\t\\t\\tfunction getDefault() { return module['default']; } :\\n \\t\\t\\tfunction getModuleExports() { return module; };\\n \\t\\t__webpack_require__.d(getter, 'a', getter);\\n \\t\\treturn getter;\\n \\t};\\n\\n \\t// Object.prototype.hasOwnProperty.call\\n \\t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\\n\\n \\t// __webpack_public_path__\\n \\t__webpack_require__.p = \\\"./\\\";\\n\\n\\n \\t// Load entry module and return exports\\n \\treturn __webpack_require__(__webpack_require__.s = \\\"./app/app.js\\\");\\n\",\"require ('./game.js')\\n\\nclass Session {\\n  constructor() {\\n    this.game;\\n    this.canvas;\\n    this.globalTimer;\\n    this.resourcesDisplay;\\n  }\\n\\n  initialize() {\\n    this.game = new Clempire();\\n    this.game.load.then(function () {\\n      window.addEventListener('resize', this.resizeHandler(), true);\\n      this.drawGame();\\n      this.displayResources();\\n      this.startGame();\\n    }.bind(this));\\n  }\\n\\n  resizeHandler() {\\n    let context = {\\n      session: this,\\n      // wait 100ms for further resizing \\n      delta: 100,\\n      timeout: false\\n    }\\n    return function() {\\n      console.log(context)\\n      context.rtime = new Date();\\n      if (!context.timeout) {\\n        context.timeout = true;\\n        setTimeout(context.session.resizeEnd.bind(context), context.delta);\\n      }\\n    }\\n  }\\n\\n  resizeEnd() {\\n    console.log(this)\\n    if (new Date() - this.rtime < this.delta) {\\n      setTimeout(this.session.resizeEnd.bind(this), this.delta);\\n    } else {\\n      this.timeout = false;\\n      this.session.drawGame.apply(this.session);\\n    }\\n  }\\n\\n  drawGame() {\\n    this.canvas = document.getElementById(\\\"mainCanvas\\\");\\n    let leftSide = document.getElementById(\\\"left-side\\\");\\n    this.canvas.width = leftSide.offsetWidth;\\n    this.canvas.height = leftSide.offsetHeight;\\n    this.displaySources();\\n    this.displayBuildings();\\n  }\\n\\n  startGame() {\\n    this.globalTimer = setInterval(this.tick.bind(this), 200);\\n  }\\n\\n  tick() {\\n    this.updateResources();\\n  }\\n\\n  displaySources() {\\n    let context = this.canvas.getContext(\\\"2d\\\");\\n    this.placeResourceAnchors();\\n    let resourceFields = document.getElementsByClassName(\\\"resource-field\\\");\\n    let counter = 0;\\n    let topGridSize = this.canvas.height / (resourceFields.length + 1)\\n\\n    for (let source in this.game.sourcesData) {\\n      if (counter === resourceFields.length) {\\n        throw new Error(\\\"Not enogh resource fields!\\\")\\n      }\\n      let image = new Image();\\n      // ToDo: cache image... atm this is reloading on every resize\\n      image.onload = function () {\\n        context.drawImage(image, 0, 0, image.width, image.height, this.canvas.width * 0.5 - 85, this.topGridSize * (this.counter + 1) - 85, 170, 170);\\n      }.bind({\\n        canvas: this.canvas,\\n        counter: counter,\\n        topGridSize: topGridSize\\n      })\\n      image.src = this.game.sourcesData[source].img;\\n      let field = resourceFields[counter];\\n      field.onclick = this.game.fieldClick.bind(this.game.sourcesData[source]);\\n      counter++;\\n    }\\n  }\\n\\n  placeResourceAnchors() {\\n    let count = 1;\\n    let length = this.game.sourcesData.length;\\n    let anchors = document.getElementById(\\\"anchors\\\");\\n    while (anchors.firstChild) {\\n      anchors.removeChild(anchors.firstChild);\\n    }\\n    for (let source in this.game.sourcesData) {\\n      let anchor = document.createElement(\\\"div\\\");\\n      anchor.classList.add(\\\"resource-field-anchor\\\");\\n      anchor.setAttribute(\\\"data-source-field\\\", count.toString());\\n      anchor.style.top = `${(100 / (length + 1)) * count}%`;\\n      anchor.style.left = \\\"50%\\\";\\n      let field = document.createElement(\\\"div\\\");\\n      field.classList.add(\\\"resource-field\\\");\\n      field.style.cursor = `url(${this.game.sourcesData[source].cursor}), pointer`\\n      anchor.appendChild(field);\\n      anchors.appendChild(anchor);\\n      count++;\\n    }\\n  }\\n\\n  displayResources() {\\n    this.resourcesDisplay = document.querySelector(\\\"#resources ul\\\");\\n    // clear list in case of a redraw due to window resize or new resources\\n    while (this.resourcesDisplay.firstChild) {\\n      this.resourcesDisplay.removeChild(this.resourcesDisplay.firstChild);\\n    }\\n    for (let resource in this.game.resourcesData) {\\n      let display = document.createElement(\\\"li\\\");\\n      let label = document.createElement(\\\"div\\\");\\n      label.style.background = `url(${this.game.resourcesData[resource].icon})  no-repeat`;\\n      display.appendChild(label);\\n      let count = document.createElement(\\\"span\\\");\\n      count.classList.add(\\\"resource-count\\\");\\n      display.appendChild(count);\\n      display.setAttribute(\\\"data-resource\\\", resource);\\n      this.resourcesDisplay.appendChild(display);\\n    }\\n  }\\n\\n  displayBuildings() {\\n    this.buildingsDisplay = document.getElementById(\\\"buildings\\\");\\n    // clear list in case of a redraw due to window resize or new resources\\n    while (this.buildingsDisplay.firstChild) {\\n      this.buildingsDisplay.removeChild(this.buildingsDisplay.firstChild);\\n    }\\n    for (let buildingIndex in this.game.buildingsData) {\\n      let display = document.createElement(\\\"div\\\");\\n      let building = this.game.buildingsData[buildingIndex];\\n      display.style.background = `url(${building.icon})  no-repeat`;\\n      display.setAttribute(\\\"title\\\", `${building.title}\\\\n\\\\n${building.description}`)\\n      this.buildingsDisplay.appendChild(display);\\n    }\\n  }\\n\\n  updateResources() {\\n    for (let i = 0; i < this.resourcesDisplay.children.length; i++) {\\n      let resourceDisplay = this.resourcesDisplay.children[i];\\n      resourceDisplay.getElementsByTagName(\\\"span\\\")[0].innerText = this.game.resources.current[resourceDisplay.dataset.resource];\\n    }\\n  }\\n}\\n\\nlet session = new Session();\\nwindow.addEventListener(\\\"load\\\", session.initialize.bind(session), true);\",\"require ('./audio.js')\\n\\nclass Clempire {\\n  constructor(session) {\\n    this.audio = new AudioPlayer();\\n    this.load = new Promise(function (resolve, reject) {\\n      let now = (new Date).getTime();\\n      console.log(\\\"Loading data ...\\\");\\n      this.loadData().then(function () {\\n        this.resources = {\\n          produced: {},\\n          gathered: {},\\n          current: {}\\n        };\\n        for (let type in this.resources) {\\n          for (let resource in this.resourcesData) {\\n            this.resources[type][resource] = 0;\\n          }\\n        }\\n        console.log(`... done in ${((new Date()).getTime() - now)}ms`);\\n        resolve()\\n      }.bind(this));\\n    }.bind(this));\\n  }\\n\\n  async loadData() {\\n    let loadingResources = fetch(\\\"/assets/data/resources.json\\\")\\n      .catch(e => console.log(e))\\n      .then(response => response.json());\\n    let loadingBuildings = fetch(\\\"/assets/data/buildings.json\\\")\\n      .catch(e => console.log(e))\\n      .then(response => response.json());\\n    let loadingSources = fetch(\\\"/assets/data/sources.json\\\")\\n      .catch(e => console.log(e))\\n      .then(response => response.json());\\n    [this.resourcesData, this.buildingsData, this.sourcesData] = await Promise.all([loadingResources, loadingBuildings, loadingSources]);\\n    for (let source in this.sourcesData) {\\n      this.audio.addSound(this.sourcesData[source].id, this.sourcesData[source].sound);\\n    }\\n  }\\n\\n  fieldClick() {\\n    // called for a click on a resource field.\\n    // this is binded to the clicked resource object\\n    session.game.resources.current[this.id]++;\\n    session.game.resources.gathered[this.id]++;\\n    session.game.audio.playSound(this.id);\\n  }\\n\\n  isReqMet(req) {\\n    for (let category in req.resources) {\\n      for (let resource in this.resourcesData) {\\n        if(!req.resources[category][resource] || req.resources[category][resource] > this.resources[category][resource]) {\\n          return false;\\n        }\\n      }\\n    }\\n    return true;\\n  }\\n}\\n\\nclass Requirement {\\n  constructor() {\\n    this.resources = {\\n      produced: {},\\n      gathered: {},\\n      total: {}\\n    }\\n  }\\n}\"]}","code":"!function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,\"a\",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p=\"./\",i(i.s=\"./app/app.js\")}({\"./app/app.js\":\n/*!********************!*\\\n  !*** ./app/app.js ***!\n  \\********************/\n/*! no static exports found */function(e,t,i){function s(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,\"value\"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}i(/*! ./game.js */\"./app/game.js\");var n=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.game,this.canvas,this.globalTimer,this.resourcesDisplay}var t,i,n;return t=e,(i=[{key:\"initialize\",value:function(){this.game=new Clempire,this.game.load.then(function(){window.addEventListener(\"resize\",this.resizeHandler(),!0),this.drawGame(),this.displayResources(),this.startGame()}.bind(this))}},{key:\"resizeHandler\",value:function(){var e={session:this,delta:100,timeout:!1};return function(){console.log(e),e.rtime=new Date,e.timeout||(e.timeout=!0,setTimeout(e.session.resizeEnd.bind(e),e.delta))}}},{key:\"resizeEnd\",value:function(){console.log(this),new Date-this.rtime<this.delta?setTimeout(this.session.resizeEnd.bind(this),this.delta):(this.timeout=!1,this.session.drawGame.apply(this.session))}},{key:\"drawGame\",value:function(){this.canvas=document.getElementById(\"mainCanvas\");var e=document.getElementById(\"left-side\");this.canvas.width=e.offsetWidth,this.canvas.height=e.offsetHeight,this.displaySources(),this.displayBuildings()}},{key:\"startGame\",value:function(){this.globalTimer=setInterval(this.tick.bind(this),200)}},{key:\"tick\",value:function(){this.updateResources()}},{key:\"displaySources\",value:function(){var e=this,t=this.canvas.getContext(\"2d\");this.placeResourceAnchors();var i=document.getElementsByClassName(\"resource-field\"),s=0,n=this.canvas.height/(i.length+1),a=function(a){if(s===i.length)throw new Error(\"Not enogh resource fields!\");var r=new Image;r.onload=function(){t.drawImage(r,0,0,r.width,r.height,.5*this.canvas.width-85,this.topGridSize*(this.counter+1)-85,170,170)}.bind({canvas:e.canvas,counter:s,topGridSize:n}),r.src=e.game.sourcesData[a].img,i[s].onclick=e.game.fieldClick.bind(e.game.sourcesData[a]),s++};for(var r in this.game.sourcesData)a(r)}},{key:\"placeResourceAnchors\",value:function(){for(var e=1,t=this.game.sourcesData.length,i=document.getElementById(\"anchors\");i.firstChild;)i.removeChild(i.firstChild);for(var s in this.game.sourcesData){var n=document.createElement(\"div\");n.classList.add(\"resource-field-anchor\"),n.setAttribute(\"data-source-field\",e.toString()),n.style.top=\"\".concat(100/(t+1)*e,\"%\"),n.style.left=\"50%\";var a=document.createElement(\"div\");a.classList.add(\"resource-field\"),a.style.cursor=\"url(\".concat(this.game.sourcesData[s].cursor,\"), pointer\"),n.appendChild(a),i.appendChild(n),e++}}},{key:\"displayResources\",value:function(){for(this.resourcesDisplay=document.querySelector(\"#resources ul\");this.resourcesDisplay.firstChild;)this.resourcesDisplay.removeChild(this.resourcesDisplay.firstChild);for(var e in this.game.resourcesData){var t=document.createElement(\"li\"),i=document.createElement(\"div\");i.style.background=\"url(\".concat(this.game.resourcesData[e].icon,\")  no-repeat\"),t.appendChild(i);var s=document.createElement(\"span\");s.classList.add(\"resource-count\"),t.appendChild(s),t.setAttribute(\"data-resource\",e),this.resourcesDisplay.appendChild(t)}}},{key:\"displayBuildings\",value:function(){for(this.buildingsDisplay=document.getElementById(\"buildings\");this.buildingsDisplay.firstChild;)this.buildingsDisplay.removeChild(this.buildingsDisplay.firstChild);for(var e in this.game.buildingsData){var t=document.createElement(\"div\"),i=this.game.buildingsData[e];t.style.background=\"url(\".concat(i.icon,\")  no-repeat\"),t.setAttribute(\"title\",\"\".concat(i.title,\"\\n\\n\").concat(i.description)),this.buildingsDisplay.appendChild(t)}}},{key:\"updateResources\",value:function(){for(var e=0;e<this.resourcesDisplay.children.length;e++){var t=this.resourcesDisplay.children[e];t.getElementsByTagName(\"span\")[0].innerText=this.game.resources.current[t.dataset.resource]}}}])&&s(t.prototype,i),n&&s(t,n),e}());window.addEventListener(\"load\",n.initialize.bind(n),!0)},\"./app/audio.js\":\n/*!**********************!*\\\n  !*** ./app/audio.js ***!\n  \\**********************/\n/*! no static exports found */function(e,t){},\"./app/game.js\":\n/*!*********************!*\\\n  !*** ./app/game.js ***!\n  \\*********************/\n/*! no static exports found */function(e,t,i){i(/*! ./audio.js */\"./app/audio.js\")}});","extractedComments":[]}