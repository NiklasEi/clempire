{"code":"!function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,\"a\",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p=\"\",i(i.s=0)}([function(e,t,i){function s(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,\"value\"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}i(1);var n=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.game,this.canvas,this.globalTimer,this.resourcesDisplay}var t,i,n;return t=e,(i=[{key:\"initialize\",value:function(){this.game=new Clempire,this.game.load.then(function(){window.addEventListener(\"resize\",this.resizeHandler(),!0),this.drawGame(),this.displayResources(),this.startGame()}.bind(this))}},{key:\"resizeHandler\",value:function(){var e={session:this,delta:100,timeout:!1};return function(){console.log(e),e.rtime=new Date,e.timeout||(e.timeout=!0,setTimeout(e.session.resizeEnd.bind(e),e.delta))}}},{key:\"resizeEnd\",value:function(){console.log(this),new Date-this.rtime<this.delta?setTimeout(this.session.resizeEnd.bind(this),this.delta):(this.timeout=!1,this.session.drawGame.apply(this.session))}},{key:\"drawGame\",value:function(){this.canvas=document.getElementById(\"mainCanvas\");var e=document.getElementById(\"left-side\");this.canvas.width=e.offsetWidth,this.canvas.height=e.offsetHeight,this.displaySources(),this.displayBuildings()}},{key:\"startGame\",value:function(){this.globalTimer=setInterval(this.tick.bind(this),200)}},{key:\"tick\",value:function(){this.updateResources()}},{key:\"displaySources\",value:function(){var e=this,t=this.canvas.getContext(\"2d\");this.placeResourceAnchors();var i=document.getElementsByClassName(\"resource-field\"),s=0,n=this.canvas.height/(i.length+1),r=function(r){if(s===i.length)throw new Error(\"Not enogh resource fields!\");var a=new Image;a.onload=function(){t.drawImage(a,0,0,a.width,a.height,.5*this.canvas.width-85,this.topGridSize*(this.counter+1)-85,170,170)}.bind({canvas:e.canvas,counter:s,topGridSize:n}),a.src=e.game.sourcesData[r].img,i[s].onclick=e.game.fieldClick.bind(e.game.sourcesData[r]),s++};for(var a in this.game.sourcesData)r(a)}},{key:\"placeResourceAnchors\",value:function(){for(var e=1,t=this.game.sourcesData.length,i=document.getElementById(\"anchors\");i.firstChild;)i.removeChild(i.firstChild);for(var s in this.game.sourcesData){var n=document.createElement(\"div\");n.classList.add(\"resource-field-anchor\"),n.setAttribute(\"data-source-field\",e.toString()),n.style.top=\"\".concat(100/(t+1)*e,\"%\"),n.style.left=\"50%\";var r=document.createElement(\"div\");r.classList.add(\"resource-field\"),r.style.cursor=\"url(\".concat(this.game.sourcesData[s].cursor,\"), pointer\"),n.appendChild(r),i.appendChild(n),e++}}},{key:\"displayResources\",value:function(){for(this.resourcesDisplay=document.querySelector(\"#resources ul\");this.resourcesDisplay.firstChild;)this.resourcesDisplay.removeChild(this.resourcesDisplay.firstChild);for(var e in this.game.resourcesData){var t=document.createElement(\"li\"),i=document.createElement(\"div\");i.style.background=\"url(\".concat(this.game.resourcesData[e].icon,\")  no-repeat\"),t.appendChild(i);var s=document.createElement(\"span\");s.classList.add(\"resource-count\"),t.appendChild(s),t.setAttribute(\"data-resource\",e),this.resourcesDisplay.appendChild(t)}}},{key:\"displayBuildings\",value:function(){for(this.buildingsDisplay=document.getElementById(\"buildings\");this.buildingsDisplay.firstChild;)this.buildingsDisplay.removeChild(this.buildingsDisplay.firstChild);for(var e in this.game.buildingsData){var t=document.createElement(\"div\"),i=this.game.buildingsData[e];t.style.background=\"url(\".concat(i.icon,\")  no-repeat\"),t.setAttribute(\"title\",\"\".concat(i.title,\"\\n\\n\").concat(i.description)),this.buildingsDisplay.appendChild(t)}}},{key:\"updateResources\",value:function(){for(var e=0;e<this.resourcesDisplay.children.length;e++){var t=this.resourcesDisplay.children[e];t.getElementsByTagName(\"span\")[0].innerText=this.game.resources.current[t.dataset.resource]}}}])&&s(t.prototype,i),n&&s(t,n),e}());window.addEventListener(\"load\",n.initialize.bind(n),!0)},function(e,t,i){i(2)},function(e,t){}]);","extractedComments":[]}